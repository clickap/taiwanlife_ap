/* Click-AP videoquiz 2.1 (2015072700) Copyright 2015 Click-AP co, ltd. http://www.click-ap.com/license/ */
(function(e){var t=0,n=e.MediaSource||e.WebKitMediaSource||{},r=e.URL||{},i,s=/video\/flv(;\s*codecs=["']vp6,aac["'])?$/,o="blob:vjs-media-source/";i=function(){},i.prototype.init=function(){this.listeners=[]},i.prototype.addEventListener=function(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].unshift(t)},i.prototype.removeEventListener=function(e,t){var n=this.listeners[e],r=n.length;while(r--)if(n[r]===t)return n.splice(r,1)},i.prototype.trigger=function(e){var t=this.listeners[e.type]||[],n=t.length;while(n--)t[n](e)},videojs.MediaSource=function(){var e=this;videojs.MediaSource.prototype.init.call(this),this.sourceBuffers=[],this.readyState="closed",this.listeners={sourceopen:[function(t){e.swfObj=document.getElementById(t.swfId),e.readyState="open",e.swfObj&&e.swfObj.vjs_load()}],webkitsourceopen:[function(t){e.trigger({type:"sourceopen"})}]}},videojs.MediaSource.prototype=new i,videojs.MediaSource.BYTES_PER_SECOND_GOAL=4194304,videojs.MediaSource.TICKS_PER_SECOND=60,videojs.MediaSource.prototype.addSourceBuffer=function(e){var t;if(s.test(e))t=new videojs.SourceBuffer(this);else{if(!this.nativeSource)throw new Error("NotSupportedError (Video.js)");t=this.nativeSource.addSourceBuffer.apply(this.nativeSource,arguments)}return this.sourceBuffers.push(t),t},videojs.MediaSource.prototype.endOfStream=function(){this.readyState="ended"},videojs.mediaSources={},videojs.MediaSource.open=function(e,t){var n=videojs.mediaSources[e];if(!n)throw new Error("Media Source not found (Video.js)");n.trigger({type:"sourceopen",swfId:t})},videojs.SourceBuffer=function(t){var n=this,r=[],i=0,s=function(t){e.setTimeout(t,Math.ceil(1e3/videojs.MediaSource.TICKS_PER_SECOND))},o=function(){var t,u,a,f,l,c="";if(!r.length)return;document.hidden?l=videojs.MediaSource.BYTES_PER_SECOND_GOAL:l=Math.ceil(videojs.MediaSource.BYTES_PER_SECOND_GOAL/videojs.MediaSource.TICKS_PER_SECOND),f=new Uint8Array(Math.min(l,i)),u=f.byteLength;while(u)t=r[0].subarray(0,u),f.set(t,f.byteLength-u),t.byteLength<r[0].byteLength?r[0]=r[0].subarray(u):r.shift(),u-=t.byteLength;i-=f.byteLength;for(u=0,a=f.byteLength;u<a;u++)c+=String.fromCharCode(f[u]);b64str=e.btoa(c),n.source.swfObj.CallFunction('<invoke name="vjs_appendBuffer"returntype="javascript"><arguments><string>'+b64str+"</string></arguments></invoke>"),i!==0?s(o):(n.updating=!1,n.trigger({type:"updateend"}),n.source.readyState==="ended"&&n.source.swfObj.vjs_endOfStream())};videojs.SourceBuffer.prototype.init.call(this),this.source=t,this.updating=!1,this.appendBuffer=function(e){var t;if(this.updating)throw t=new Error("SourceBuffer.append() cannot be called while an update is in progress"),t.name="InvalidStateError",t.code=11,t;r.length===0&&s(o),this.updating=!0,this.source.readyState="open",this.trigger({type:"update"}),r.push(e),i+=e.byteLength},this.abort=function(){r=[],i=0,this.source.swfObj.vjs_abort(),this.updating&&(this.updating=!1,this.trigger({type:"updateend"}))}},videojs.SourceBuffer.prototype=new i,videojs.URL={createObjectURL:function(e){var n=o+t;return t++,videojs.mediaSources[n]=e,n}},videojs.plugin("mediaSource",function(e){var t=this;t.on("loadstart",function(){var e=t.currentSrc(),i=function(e){s.trigger(e)},s,u;for(var a=0;a<t.options().techOrder.length;a++){var f=t.options().techOrder[a];u=f.charAt(0).toUpperCase()+f.slice(1);break}u==="Html5"&&e.indexOf(o)===0&&(s=videojs.mediaSources[e],s.nativeUrl||(s.nativeSource=new n,s.nativeSource.addEventListener("sourceopen",i,!1),s.nativeSource.addEventListener("webkitsourceopen",i,!1),s.nativeUrl=r.createObjectURL(s.nativeSource)),t.src(s.nativeUrl))})})})(this),function(e,t,n,r){"use strict";var i=1.1,s=500,o,u,a;u=function(e){return e.retries&&e.retries>=2},t.Hls=t.Flash.extend({init:function(e,n,r){var i=n.source,s=e.options();e.hls=this,delete n.source,n.swf=s.flash.swf,t.Flash.call(this,e,n,r),n.source=i,this.bytesReceived=0,this.currentTime=t.Hls.prototype.currentTime,this.setCurrentTime=t.Hls.prototype.setCurrentTime,this.segmentBuffer_=[],this.startCheckingBuffer_(),t.Hls.prototype.src.call(this,n.source&&n.source.src)}}),t.options.techOrder.unshift("hls"),t.Hls.GOAL_BUFFER_LENGTH=30,t.Hls.prototype.src=function(e){var n=this,i=this.player(),s=i.options().hls||{},u,a,f;if(!e)return;this.src_&&this.resetSrc_(),this.src_=e,u=new t.MediaSource,f={src:t.URL.createObjectURL(u),type:"video/flv"},this.mediaSource=u,this.segmentBuffer_=[],this.segmentParser_=new t.Hls.SegmentParser,this.setupMetadataCueTranslation_(),this.mediaSource.addEventListener("sourceopen",t.bind(this,this.handleSourceOpen)),this.playlists&&this.playlists.dispose(),this.mediaIndex=0,this.playlists=new t.Hls.PlaylistLoader(this.src_,s.withCredentials),this.playlists.on("loadedmetadata",t.bind(this,function(){var e,n,s,o,u,f,l,c;l=function(){this.fillBuffer(),i.trigger("loadedmetadata")},a=this.playlists.media(),this.bandwidth===r&&this.setBandwidth({bandwidth:this.playlists.bandwidth*5}),e=this.selectPlaylist(),s=a.attributes&&a.attributes.BANDWIDTH||0,o=e.attributes&&e.attributes.BANDWIDTH||0,u=a.segments&&a.segments[this.mediaIndex].duration||a.targetDuration,f=u*o/this.bandwidth,f||(f=Infinity),c=10,o>s&&f<=c?(this.playlists.media(e),n=t.bind(this,function(){l.call(this),this.playlists.off("loadedplaylist",n)}),this.playlists.on("loadedplaylist",n)):l.call(this)})),this.playlists.on("error",t.bind(this,function(){i.error(this.playlists.error)})),this.playlists.on("loadedplaylist",t.bind(this,function(){var e=this.playlists.media();if(!e)return;this.updateDuration(this.playlists.media()),this.mediaIndex=t.Hls.translateMediaIndex(this.mediaIndex,a,e),a=e,this.fetchKeys_()})),this.playlists.on("mediachange",t.bind(this,function(){o&&this.cancelKeyXhr(),i.trigger("mediachange")})),this.player().ready(function(){if(!n.el())return;n.el().vjs_src(f.src)})},t.Hls.getMediaIndexForLive_=function(e){if(!e.segments)return 0;var t=e.segments.length,n=0,r=(e.targetDuration||10)*3;while(n<r&&t>0)n+=e.segments[t-1].duration,t--;
return t},t.Hls.prototype.handleSourceOpen=function(){var e=this.player(),t=this.mediaSource.addSourceBuffer('video/flv; codecs="vp6,aac"');this.sourceBuffer=t,e.options().autoplay&&e.play(),t.appendBuffer(this.segmentParser_.getFlvHeader())},t.Hls.prototype.setupMetadataCueTranslation_=function(){var e=this,n=e.segmentParser_.metadataStream,r;if(!e.player().addTextTrack)return;n.on("data",function(i){var s,o;if(!r){r=e.player().addTextTrack("metadata","Timed Metadata"),r.inBandMetadataTrackDispatchType=t.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16).toUpperCase();for(s=0;s<n.descriptor.length;s++)o=("00"+n.descriptor[s].toString(16).toUpperCase()).slice(-2),r.inBandMetadataTrackDispatchType+=o}e.segmentBuffer_[0].pendingMetadata.push({textTrack:r,metadata:i})}),e.on(e.player(),"seeking",function(){var n,i,s;if(!r)return;n=e.playlists.media(),i=e.playlists.expiredPreDiscontinuity_+e.playlists.expiredPostDiscontinuity_,i+=t.Hls.Playlist.duration(n,n.mediaSequence,n.mediaSequence+e.mediaIndex),s=r.cues.length;while(s--)r.cues[s].startTime>=i&&r.removeCue(r.cues[s])})},t.Hls.prototype.addCuesForMetadata_=function(n){var r,i,s,o,u,a,f,l,c;f=t.Hls.Playlist.duration(n.playlist,n.playlist.mediaSequence,n.playlist.mediaSequence+n.mediaIndex),a=n.playlist.segments[n.mediaIndex],u=Math.min(a.minVideoPts,a.minAudioPts);while(n.pendingMetadata.length){o=n.pendingMetadata[0].metadata,l=n.pendingMetadata[0].textTrack;for(r=0;r<o.frames.length;r++)s=o.frames[r],c=f+(o.pts-u)*.001,i=new e.VTTCue(c,c,s.value||s.url||""),i.frame=s,l.addCue(i);n.pendingMetadata.shift()}},t.Hls.prototype.play=function(){return this.ended()&&(this.mediaIndex=0),this.duration()===Infinity&&(!this.player().hasClass("vjs-has-started")||this.currentTime()>this.seekable().end(0)?this.setCurrentTime(this.seekable().end(0)):this.currentTime()<this.seekable().start(0)&&this.setCurrentTime(this.seekable().start(0))),t.Flash.prototype.play.apply(this,arguments)},t.Hls.prototype.currentTime=function(){return this.lastSeekedTime_?this.lastSeekedTime_:!this.el()||!this.el().vjs_getProperty?0:this.el().vjs_getProperty("currentTime")},t.Hls.prototype.setCurrentTime=function(e){if(!this.playlists||!this.playlists.media())return 0;if(!this.playlists.media().segments)return 0;e<this.seekable().start(0)?e=this.seekable().start(0):e>this.seekable().end(0)&&(e=this.seekable().end(0)),this.lastSeekedTime_=e,this.mediaIndex=this.playlists.getMediaIndexForTime_(e),this.sourceBuffer.abort(),this.cancelSegmentXhr(),o&&(o.aborted=!0,this.cancelKeyXhr()),this.segmentBuffer_=[],this.fillBuffer(e*1e3)},t.Hls.prototype.duration=function(){var e=this.playlists;return e?t.Hls.Playlist.duration(e.media()):0},t.Hls.prototype.seekable=function(){var e,n,r;return this.playlists?(r=this.playlists.media(),r?(e=t.Hls.Playlist.seekable(r),n=this.playlists.expiredPostDiscontinuity_-this.playlists.expiredPreDiscontinuity_,t.createTimeRange(n,n+(e.end(0)-e.start(0)))):t.createTimeRange()):t.createTimeRange()},t.Hls.prototype.updateDuration=function(e){var n=this.player(),r=n.duration(),i=t.Hls.Playlist.duration(e);r!==i&&n.trigger("durationchange")},t.Hls.prototype.resetSrc_=function(){this.cancelSegmentXhr(),this.cancelKeyXhr(),this.sourceBuffer&&this.sourceBuffer.abort()},t.Hls.prototype.cancelKeyXhr=function(){o&&(o.onreadystatechange=null,o.abort(),o=null)},t.Hls.prototype.cancelSegmentXhr=function(){this.segmentXhr_&&(this.segmentXhr_.onreadystatechange=null,this.segmentXhr_.abort(),this.segmentXhr_=null)},t.Hls.prototype.dispose=function(){this.stopCheckingBuffer_(),this.playlists&&this.playlists.dispose(),this.resetSrc_(),t.Flash.prototype.dispose.call(this)},t.Hls.prototype.selectPlaylist=function(){var e=this.player(),n,r=this.playlists.master.playlists.slice(),s=[],o=r.length,u,a,f,l,c,h,p;r.sort(t.Hls.comparePlaylistBandwidth);while(o--){u=r[o];if(!u.attributes||!u.attributes.BANDWIDTH)continue;n=u.attributes.BANDWIDTH*i,n<e.hls.bandwidth&&(s.push(u),f||(f=u))}o=s.length,s.sort(t.Hls.comparePlaylistResolution),u=null,h=parseInt(getComputedStyle(e.el()).width,10),p=parseInt(getComputedStyle(e.el()).height,10);while(o--){a=u,u=s[o];if(!u.attributes||!u.attributes.RESOLUTION||!u.attributes.RESOLUTION.width||!u.attributes.RESOLUTION.height)continue;if(u.attributes.RESOLUTION.width===h&&u.attributes.RESOLUTION.height===p){l=null,c=u;break}if(u.attributes.RESOLUTION.width<h&&u.attributes.RESOLUTION.height<p){a&&a.attributes&&a.attributes.RESOLUTION&&a.attributes.RESOLUTION.width&&a.attributes.RESOLUTION.height&&(l=a),c=u;break}}return l||c||f||r[0]},t.Hls.prototype.checkBuffer_=function(){this.checkBufferTimeout_&&(e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null),this.fillBuffer(),this.drainBuffer(),this.checkBufferTimeout_=e.setTimeout(t.bind(this,this.checkBuffer_),s)},t.Hls.prototype.startCheckingBuffer_=function(){this.player().on("waiting",t.bind(this,this.drainBuffer)),this.checkBuffer_()},t.Hls.prototype.stopCheckingBuffer_=function(){e.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null,this.player().off("waiting",this.drainBuffer)},t.Hls.prototype.fillBuffer=function(e){var n=this.player(),i=n.buffered(),s=0,o,u;if(!n.hasClass("vjs-has-started")&&n.options().preload==="none")return;if(!n.currentSrc()||!this.playlists)return;if(this.segmentXhr_)return;if(this.playlists.state==="HAVE_NOTHING"||!this.playlists.media()||!this.playlists.media().segments)return;if(!this.playlists.media().endList&&!this.player().hasClass("vjs-has-started")&&e===r)return;if(this.playlists.state==="SWITCHING_MEDIA")return;o=this.playlists.media().segments[this.mediaIndex];if(!o)return;i&&(s=n.buffered().end(0)-n.currentTime());if(typeof e!="number"&&s>=t.Hls.GOAL_BUFFER_LENGTH)return;u=this.playlistUriToUrl(o.uri),this.loadSegment(u,e)},t.Hls.prototype.playlistUriToUrl=function(e){var t;return this.playlists.media().uri===this.src_?t=a(this.src_,e):t=a(a(this.src_,this.playlists.media().uri||""),e),t},t.Hls.prototype.setBandwidth=function(
e){var t=this;t.segmentXhrTime=e.roundTripTime,t.bandwidth=e.bandwidth,t.bytesReceived+=e.bytesReceived||0,t.trigger("bandwidthupdate")},t.Hls.prototype.loadSegment=function(e,n){var r=this,i=this.player(),s=i.options().hls||{};this.segmentXhr_=t.Hls.xhr({url:e,responseType:"arraybuffer",withCredentials:s.withCredentials},function(e,t){var s;r.segmentXhr_=null;if(e){if(e==="timeout")return r.bandwidth=1,r.playlists.media(r.selectPlaylist());r.error={status:this.status,message:"HLS segment request error at URL: "+t,code:this.status>=500?4:2},r.mediaIndex++;return}if(!this.response)return;r.setBandwidth(this),s={mediaIndex:r.mediaIndex,playlist:r.playlists.media(),offset:n,bytes:null,encryptedBytes:null,decrypter:null,pendingMetadata:[]},s.playlist.segments[s.mediaIndex].key?s.encryptedBytes=new Uint8Array(this.response):s.bytes=new Uint8Array(this.response),r.segmentBuffer_.push(s),i.trigger("progress"),r.drainBuffer(),r.mediaIndex++,r.playlists.media(r.selectPlaylist())})},t.Hls.prototype.drainBuffer=function(e){var n=0,r,i,s,o,a,f,l,c,h,p,d=0,v=this.segmentBuffer_;if(!v.length||!this.sourceBuffer)return;if(this.sourceBuffer.updating)return;r=v[0],i=r.mediaIndex,s=r.playlist,o=r.offset,f=r.bytes,l=s.segments[i];if(l.key&&!f){if(u(l.key))return v.shift();if(!l.key.bytes)return this.fetchKeys_();if(r.decrypter)return;h=l.key.iv||new Uint32Array([0,0,0,i+s.mediaSequence]),c=new t.Hls.Decrypter(r.encryptedBytes,l.key.bytes,h,function(e,t){r.bytes=t}),r.decrypter=c;return}e=e||{},this.segmentParser_.parseSegmentBinaryData(f),this.segmentParser_.flushTags(),a=[],this.segmentParser_.tagsAvailable()&&(this.segmentParser_.stats.h264Tags()&&(l.minVideoPts=this.segmentParser_.stats.minVideoPts(),l.maxVideoPts=this.segmentParser_.stats.maxVideoPts()),this.segmentParser_.stats.aacTags()&&(l.minAudioPts=this.segmentParser_.stats.minAudioPts(),l.maxAudioPts=this.segmentParser_.stats.maxAudioPts()));while(this.segmentParser_.tagsAvailable())a.push(this.segmentParser_.getNextTag());this.addCuesForMetadata_(r),this.updateDuration(this.playlists.media());if(typeof o=="number"){d=this.playlists.expiredPostDiscontinuity_+this.playlists.expiredPreDiscontinuity_,d+=t.Hls.Playlist.duration(s,s.mediaSequence,s.mediaSequence+i),d=o-d*1e3,p=d+a[0].pts;while(a[n+1]&&a[n].pts<p)n++;this.el().vjs_setProperty("currentTime",(a[n].pts-p+o)*.001),a=a.slice(n),this.lastSeekedTime_=null}l.discontinuity&&a.length&&this.el().vjs_discontinuity(),function(){var e=0,t,r;for(n=0;n<a.length;n++)e+=a[n].bytes.byteLength;r=new Uint8Array(e);for(n=0,t=0;n<a.length;n++)r.set(a[n].bytes,t),t+=a[n].bytes.byteLength;this.sourceBuffer.appendBuffer(r)}.call(this),v.shift(),this.duration()!==Infinity&&i+1===s.segments.length&&this.mediaSource.endOfStream()},t.Hls.prototype.fetchKeys_=function(){var e,n,r,i,s,a,f,l;if(o||!this.segmentBuffer_.length)return;r=this,i=this.player(),s=i.options().hls||{},l=function(e){return function(t){o=null;if(t||!this.response||this.response.byteLength!==16){e.retries=e.retries||0,e.retries++,this.aborted||r.fetchKeys_();return}f=new DataView(this.response),e.bytes=new Uint32Array([f.getUint32(0),f.getUint32(4),f.getUint32(8),f.getUint32(12)]),r.checkBuffer_()}};for(e=0;e<r.segmentBuffer_.length;e++){a=r.segmentBuffer_[e].playlist.segments[r.segmentBuffer_[e].mediaIndex],n=a.key;if(!n)continue;if(!n.bytes&&!u(n)){o=t.Hls.xhr({url:this.playlistUriToUrl(n.uri),responseType:"arraybuffer",withCredentials:s.withCredentials},l(n));break}}},t.Hls.supportsNativeHls=function(){var e=n.createElement("video"),r,i;return t.Html5.isSupported()?(r=e.canPlayType("application/x-mpegURL"),i=e.canPlayType("application/vnd.apple.mpegURL"),/probably|maybe/.test(r)||/probably|maybe/.test(i)):!1}(),t.Hls.isSupported=function(){return!t.Hls.supportsNativeHls&&t.Flash.isSupported()&&t.MediaSource&&e.Uint8Array},t.Hls.canPlaySource=function(e){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return t.test(e.type)},t.Hls.getPlaylistDuration=function(e,n,r){return t.log.warn("videojs.Hls.getPlaylistDuration is deprecated. Use videojs.Hls.Playlist.duration instead"),t.Hls.Playlist.duration(e,n,r)},t.Hls.getPlaylistTotalDuration=function(e){return t.log.warn("videojs.Hls.getPlaylistTotalDuration is deprecated. Use videojs.Hls.Playlist.duration instead"),t.Hls.Playlist.duration(e)},t.Hls.translateMediaIndex=function(e,n,r){var i;return e===0?0:!r||!r.segments?0:(i=e+(n.mediaSequence-r.mediaSequence),i>r.segments.length||i<0?t.Hls.getMediaIndexForLive_(r)+1:i)},t.Hls.getMediaIndexByTime=function(){return t.log.warn("getMediaIndexByTime is deprecated. Use PlaylistLoader.getMediaIndexForTime_ instead."),0},t.Hls.comparePlaylistBandwidth=function(t,n){var r,i;return t.attributes&&t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||e.Number.MAX_VALUE,n.attributes&&n.attributes.BANDWIDTH&&(i=n.attributes.BANDWIDTH),i=i||e.Number.MAX_VALUE,r-i},t.Hls.comparePlaylistResolution=function(t,n){var r,i;return t.attributes&&t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||e.Number.MAX_VALUE,n.attributes&&n.attributes.RESOLUTION&&n.attributes.RESOLUTION.width&&(i=n.attributes.RESOLUTION.width),i=i||e.Number.MAX_VALUE,r===i&&t.attributes.BANDWIDTH&&n.attributes.BANDWIDTH?t.attributes.BANDWIDTH-n.attributes.BANDWIDTH:r-i},a=t.Hls.resolveUrl=function(e,t){var r=n.querySelector("base"),i=n.querySelector("head"),s=n.createElement("a"),o=r,u,a;return r?u=r.href:o=i.appendChild(n.createElement("base")),o.href=e,s.href=t,a=s.href,r?r.href=u:i.removeChild(o),a}}(window,window.videojs,document),function(e){e.Hls.xhr=function(t,n){var r={method:"GET",timeout:45e3},i,s;return typeof n!="function"&&(n=function(){}),typeof t=="object"&&(r=e.util.mergeOptions(r,t),t=r.url),i=new window.XMLHttpRequest,i.open(r.method,t),i.url=t,i.requestTime=(new Date).getTime(),r.responseType&&(i.responseType=r.responseType),r.withCredentials&&(i.withCredentials=!0),r.timeout&&(s=window.setTimeout(function(){i.readyState!==4&&(i.timedout=!0
,i.abort())},r.timeout)),i.onreadystatechange=function(){if(this.readyState!==4)return;return window.clearTimeout(s),i.timedout?n.call(this,"timeout",t):this.status>=400||this.status===0?n.call(this,!0,t):(this.response&&(this.responseTime=(new Date).getTime(),this.roundTripTime=this.responseTime-this.requestTime,this.bytesReceived=this.response.byteLength||this.response.length,this.bandwidth=Math.floor(this.bytesReceived/this.roundTripTime*8*1e3)),n.call(this,!1,t))},i.send(null),i}}(window.videojs),function e(t,n,r){function i(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(s)return s(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return i(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var s=typeof require=="function"&&require;for(var o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,t,n){(function(t){t.window.pkcs7={unpad:e("./unpad")}}).call(this,typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./unpad":2}],2:[function(e,t,n){"use strict";t.exports=function(t){return t.subarray(0,t.byteLength-t[t.byteLength-1])}},{}]},{},[1]),function(e){e.videojs=e.videojs||{},e.videojs.Hls=e.videojs.Hls||{};var t=e.videojs.Hls;t.FlvTag=function(e,n){var r=0,i=function(e,t){var n,r=e.position+t;if(r<e.bytes.byteLength)return;n=new Uint8Array(r*2),n.set(e.bytes.subarray(0,e.position),0),e.bytes=n,e.view=new DataView(e.bytes.buffer)},s=t.FlvTag.widthBytes||new Uint8Array("width".length),o=t.FlvTag.heightBytes||new Uint8Array("height".length),u=t.FlvTag.videocodecidBytes||new Uint8Array("videocodecid".length),a;if(!t.FlvTag.widthBytes){for(a=0;a<"width".length;a++)s[a]="width".charCodeAt(a);for(a=0;a<"height".length;a++)o[a]="height".charCodeAt(a);for(a=0;a<"videocodecid".length;a++)u[a]="videocodecid".charCodeAt(a);t.FlvTag.widthBytes=s,t.FlvTag.heightBytes=o,t.FlvTag.videocodecidBytes=u}this.keyFrame=!1;switch(e){case t.FlvTag.VIDEO_TAG:this.length=16;break;case t.FlvTag.AUDIO_TAG:this.length=13,this.keyFrame=!0;break;case t.FlvTag.METADATA_TAG:this.length=29,this.keyFrame=!0;break;default:throw"Error Unknown TagType"}this.bytes=new Uint8Array(16384),this.view=new DataView(this.bytes.buffer),this.bytes[0]=e,this.position=this.length,this.keyFrame=n,this.pts=0,this.dts=0,this.writeBytes=function(e,t,n){var r=t||0,s;n=n||e.byteLength,s=r+n,i(this,n),this.bytes.set(e.subarray(r,s),this.position),this.position+=n,this.length=Math.max(this.length,this.position)},this.writeByte=function(e){i(this,1),this.bytes[this.position]=e,this.position++,this.length=Math.max(this.length,this.position)},this.writeShort=function(e){i(this,2),this.view.setUint16(this.position,e),this.position+=2,this.length=Math.max(this.length,this.position)},this.negIndex=function(e){return this.bytes[this.length-e]},this.nalUnitSize=function(){return r===0?0:this.length-(r+4)},this.startNalUnit=function(){if(r>0)throw new Error("Attempted to create new NAL wihout closing the old one");r=this.length,this.length+=4,this.position=this.length},this.endNalUnit=function(e){var t,n;this.length===r+4?this.length-=4:r>0&&(t=r+4,n=this.length-t,this.position=r,this.view.setUint32(this.position,n),this.position=this.length,e&&e.push(this.bytes.subarray(t,t+n))),r=0},this.writeMetaDataDouble=function(e,t){var n;i(this,2+e.length+9),this.view.setUint16(this.position,e.length),this.position+=2;if(e==="width")this.bytes.set(s,this.position),this.position+=5;else if(e==="height")this.bytes.set(o,this.position),this.position+=6;else if(e==="videocodecid")this.bytes.set(u,this.position),this.position+=12;else for(n=0;n<e.length;n++)this.bytes[this.position]=e.charCodeAt(n),this.position++;this.position++,this.view.setFloat64(this.position,t),this.position+=8,this.length=Math.max(this.length,this.position),++r},this.writeMetaDataBoolean=function(e,t){var n;i(this,2),this.view.setUint16(this.position,e.length),this.position+=2;for(n=0;n<e.length;n++)console.assert(e.charCodeAt(n)<255),i(this,1),this.bytes[this.position]=e.charCodeAt(n),this.position++;i(this,2),this.view.setUint8(this.position,1),this.position++,this.view.setUint8(this.position,t?1:0),this.position++,this.length=Math.max(this.length,this.position),++r},this.finalize=function(){var e,s;switch(this.bytes[0]){case t.FlvTag.VIDEO_TAG:this.bytes[11]=(this.keyFrame||n?16:32)|7,this.bytes[12]=n?0:1,e=this.pts-this.dts,this.bytes[13]=(e&16711680)>>>16,this.bytes[14]=(e&65280)>>>8,this.bytes[15]=(e&255)>>>0;break;case t.FlvTag.AUDIO_TAG:this.bytes[11]=175,this.bytes[12]=n?0:1;break;case t.FlvTag.METADATA_TAG:this.position=11,this.view.setUint8(this.position,2),this.position++,this.view.setUint16(this.position,10),this.position+=2,this.bytes.set([111,110,77,101,116,97,68,97,116,97],this.position),this.position+=10,this.bytes[this.position]=8,this.position++,this.view.setUint32(this.position,r),this.position=this.length,this.bytes.set([0,0,9],this.position),this.position+=3,this.length=this.position}return s=this.length-11,this.bytes[1]=(s&16711680)>>>16,this.bytes[2]=(s&65280)>>>8,this.bytes[3]=(s&255)>>>0,this.bytes[4]=(this.dts&16711680)>>>16,this.bytes[5]=(this.dts&65280)>>>8,this.bytes[6]=(this.dts&255)>>>0,this.bytes[7]=(this.dts&4278190080)>>>24,this.bytes[8]=0,this.bytes[9]=0,this.bytes[10]=0,i(this,4),this.view.setUint32(this.length,this.length),this.length+=4,this.position+=4,this.bytes=this.bytes.subarray(0,this.length),this.frameTime=t.FlvTag.frameTime(this.bytes),console.assert(this.bytes.byteLength===this.length),this}},t.FlvTag.AUDIO_TAG=8,t.FlvTag.VIDEO_TAG=9,t.FlvTag.METADATA_TAG=18,t.FlvTag.isAudioFrame=function(e){return t.FlvTag.AUDIO_TAG===e[0]},t.FlvTag.isVideoFrame=function(e){return t.FlvTag.VIDEO_TAG===e[0]},t.FlvTag.isMetaData=function(e){return t.FlvTag.METADATA_TAG===e[0]},t.FlvTag.isKeyFrame=function(e){return t.FlvTag.isVideoFrame(e)?e[11]===23:t.FlvTag.isAudioFrame(e)?!0:t.FlvTag.isMetaData(e)?!0:!1},t.FlvTag.frameTime=
function(e){var t=e[4]<<16;return t|=e[5]<<8,t|=e[6]<<0,t|=e[7]<<24,t}}(this),function(e,t){var n=function(){this.init=function(){var e={};this.on=function(t,n){e[t]||(e[t]=[]),e[t].push(n)},this.off=function(t,n){var r;return e[t]?(r=e[t].indexOf(n),e[t].splice(r,1),r>-1):!1},this.trigger=function(t){var n,r,i,s;n=e[t];if(!n)return;s=Array.prototype.slice.call(arguments,1),i=n.length;for(r=0;r<i;++r)n[r].apply(this,s)},this.dispose=function(){e={}}}};n.prototype.pipe=function(e){this.on("data",function(t){e.push(t)})},e.Hls.Stream=n}(window.videojs),function(e){e.videojs.Hls.ExpGolomb=function(e){var t=e.byteLength,n=0,r=0;this.length=function(){return 8*t},this.bitsAvailable=function(){return 8*t+r},this.loadWord=function(){var i=e.byteLength-t,s=new Uint8Array(4),o=Math.min(4,t);if(o===0)throw new Error("no bytes available");s.set(e.subarray(i,i+o)),n=(new DataView(s.buffer)).getUint32(0),r=o*8,t-=o},this.skipBits=function(e){var i;r>e?(n<<=e,r-=e):(e-=r,i=e/8,e-=i*8,t-=i,this.loadWord(),n<<=e,r-=e)},this.readBits=function(e){var i=Math.min(r,e),s=n>>>32-i;return console.assert(e<32,"Cannot read more than 32 bits at a time"),r-=i,r>0?n<<=i:t>0&&this.loadWord(),i=e-i,i>0?s<<i|this.readBits(i):s},this.skipLeadingZeros=function(){var e;for(e=0;e<r;++e)if(0!==(n&2147483648>>>e))return n<<=e,r-=e,e;return this.loadWord(),e+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var e=this.skipLeadingZeros();return this.readBits(e+1)-1},this.readExpGolomb=function(){var e=this.readUnsignedExpGolomb();return 1&e?1+e>>>1:-1*(e>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()}}(this),function(){var e,t=window.videojs.Hls.ExpGolomb,n=window.videojs.Hls.FlvTag;window.videojs.Hls.H264ExtraData=e=function(){this.sps=[],this.pps=[]},e.prototype.extraDataExists=function(){return this.sps.length>0},e.prototype.scaling_list=function(e,t){var n=8,r=8,i,s;for(i=0;i<e;++i)0!==r&&(s=t.readExpGolomb(),r=(n+s+256)%256),n=r===0?n:r},e.prototype.getSps0Rbsp=function(){var e=this.sps[0],t=1,n=1,r=0,i=e.byteLength-2,s=new Uint8Array(e.byteLength);while(t<i)e[t]===0&&e[t+1]===0&&e[t+2]===3&&(s.set(e.subarray(n,t+1),r),r+=t+1-n,n=t+3),t++;return s.set(e.subarray(n),r),s.subarray(0,r+(e.byteLength-n))},e.prototype.metaDataTag=function(e){var r=new n(n.METADATA_TAG),i,s,o,u,a,f,l,c,h,p,d,v=0,m=0,g=0,y=0,b,w;r.dts=e,r.pts=e,i=new t(this.getSps0Rbsp()),s=i.readUnsignedByte(),i.skipBits(16),i.skipUnsignedExpGolomb();if(s===100||s===110||s===122||s===244||s===44||s===83||s===86||s===118||s===128){o=i.readUnsignedExpGolomb(),3===o&&i.skipBits(1),i.skipUnsignedExpGolomb(),i.skipUnsignedExpGolomb(),i.skipBits(1);if(i.readBoolean()){u=o!==3?8:12;for(a=0;a<u;++a)i.readBoolean()&&(a<6?this.scaling_list(16,i):this.scaling_list(64,i))}}i.skipUnsignedExpGolomb(),f=i.readUnsignedExpGolomb();if(0===f)i.readUnsignedExpGolomb();else if(1===f){i.skipBits(1),i.skipExpGolomb(),i.skipExpGolomb(),l=i.readUnsignedExpGolomb();for(a=0;a<l;++a)i.skipExpGolomb()}return i.skipUnsignedExpGolomb(),i.skipBits(1),c=i.readUnsignedExpGolomb(),h=i.readUnsignedExpGolomb(),p=i.readBits(1),0===p&&i.skipBits(1),i.skipBits(1),d=i.readBoolean(),d&&(v=i.readUnsignedExpGolomb(),m=i.readUnsignedExpGolomb(),g=i.readUnsignedExpGolomb(),y=i.readUnsignedExpGolomb()),b=(c+1)*16-v*2-m*2,w=(2-p)*(h+1)*16-g*2-y*2,r.writeMetaDataDouble("videocodecid",7),r.writeMetaDataDouble("width",b),r.writeMetaDataDouble("height",w),r},e.prototype.extraDataTag=function(e){var t,r=new n(n.VIDEO_TAG,!0);r.dts=e,r.pts=e,r.writeByte(1),r.writeByte(this.sps[0][1]),r.writeByte(this.sps[0][2]),r.writeByte(this.sps[0][3]),r.writeByte(255),r.writeByte(225),r.writeShort(this.sps[0].length),r.writeBytes(this.sps[0]),r.writeByte(this.pps.length);for(t=0;t<this.pps.length;++t)r.writeShort(this.pps[t].length),r.writeBytes(this.pps[t]);return r}}(),function(e){var t=e.videojs.Hls.FlvTag,n=e.videojs.Hls.H264ExtraData,r,i;e.videojs.Hls.NALUnitType=i={unspecified:0,slice_layer_without_partitioning_rbsp_non_idr:1,slice_data_partition_a_layer_rbsp:2,slice_data_partition_b_layer_rbsp:3,slice_data_partition_c_layer_rbsp:4,slice_layer_without_partitioning_rbsp_idr:5,sei_rbsp:6,seq_parameter_set_rbsp:7,pic_parameter_set_rbsp:8,access_unit_delimiter_rbsp:9,end_of_seq_rbsp:10,end_of_stream_rbsp:11},e.videojs.Hls.H264Stream=r=function(){this._next_pts=0,this._next_dts=0,this._h264Frame=null,this._oldExtraData=new n,this._newExtraData=new n,this._nalUnitType=-1,this._state=0,this.tags=[]},r.prototype.setTimeStampOffset=function(){},r.prototype.setNextTimeStamp=function(e,t,n){this._next_pts=e,this._next_dts=t,n&&this.finishFrame()},r.prototype.finishFrame=function(){this._h264Frame&&(this._newExtraData.extraDataExists()&&(this._oldExtraData=this._newExtraData,this._newExtraData=new n),this._oldExtraData.extraDataExists()&&(this._h264Frame.keyFrame||this.tags.length===0)&&(this.tags.push(this._oldExtraData.metaDataTag(this._h264Frame.pts)),this.tags.push(this._oldExtraData.extraDataTag(this._h264Frame.pts))),this._h264Frame.endNalUnit(),this.tags.push(this._h264Frame)),this._h264Frame=null,this._nalUnitType=-1,this._state=0},r.prototype.writeBytes=function(e,n,r){var s,o,u,a;n=n||0,r=r||0;if(r<=0)return;switch(this._state){default:case 0:this._state=1;case 1:if(e[n]<=1){s=this._h264Frame?this._h264Frame.nalUnitSize():0;if(s>=1&&this._h264Frame.negIndex(1)===0){if(e[n]===1&&s>=2&&this._h264Frame.negIndex(2)===0)return 3<=s&&0===this._h264Frame.negIndex(3)?this._h264Frame.length-=3:this._h264Frame.length-=2,this._state=3,this.writeBytes(e,n+1,r-1);if(r>1&&e[n]===0&&e[n+1]===1)return s>=2&&this._h264Frame.negIndex(2)===0?this._h264Frame.length-=2:this._h264Frame.length-=1,this._state=3,this.writeBytes(e,n+2,r-2);if(r>2&&e[n]===0&&e[n+1]===0&&e[n+2]===1)return this._state=3
,this.writeBytes(e,n+3,r-3)}}this._state=2;case 2:o=n,u=o+r;for(a=u-3;n<a;)if(e[n+2]>1)n+=3;else if(e[n+1]!==0)n+=2;else if(e[n]!==0)n+=1;else{if(e[n+2]===1)return n>o&&this._h264Frame.writeBytes(e,o,n-o),this._state=3,n+=3,this.writeBytes(e,n,u-n);if(u-n>=4&&e[n+2]===0&&e[n+3]===1)return n>o&&this._h264Frame.writeBytes(e,o,n-o),this._state=3,n+=4,this.writeBytes(e,n,u-n);n+=3}this._state=1,this._h264Frame&&this._h264Frame.writeBytes(e,o,r);return;case 3:if(this._h264Frame)switch(this._nalUnitType){case i.seq_parameter_set_rbsp:this._h264Frame.endNalUnit(this._newExtraData.sps);break;case i.pic_parameter_set_rbsp:this._h264Frame.endNalUnit(this._newExtraData.pps);break;case i.slice_layer_without_partitioning_rbsp_idr:this._h264Frame.endNalUnit();break;default:this._h264Frame.endNalUnit()}return this._nalUnitType=e[n]&31,this._h264Frame&&(this._nalUnitType===i.access_unit_delimiter_rbsp?this.finishFrame():this._nalUnitType===i.slice_layer_without_partitioning_rbsp_idr&&(this._h264Frame.keyFrame=!0)),this._h264Frame||(this._h264Frame=new t(t.VIDEO_TAG),this._h264Frame.pts=this._next_pts,this._h264Frame.dts=this._next_dts),this._h264Frame.startNalUnit(),this._state=2,this.writeBytes(e,n,r)}}}(this),function(e){var t=e.videojs.Hls.FlvTag,n=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3];e.videojs.Hls.AacStream=function(){var e,r,i,s,o,u,a,f,l,c,h,p,d;this.tags=[],this.setTimeStampOffset=function(e){s=e-1e3},this.setNextTimeStamp=function(t,n,s){e=t,i=n,s&&(r=0)},this.writeBytes=function(v,m,g){var y,b,w;m=m||0,g=g||0,g=i<g?i:g,i-=g,y=m+g;while(m<y)switch(r){default:r=0;break;case 0:if(m>=y)return;if(255!==v[m]){console.assert(!1,"Error no ATDS header found"),m+=1,r=0;return}m+=1,r=1;break;case 1:if(m>=y)return;if(240!==(v[m]&240)){console.assert(!1,"Error no ATDS header found"),m+=1,r=0;return}o=!!(v[m]&1),m+=1,r=2;break;case 2:if(m>=y)return;u=((v[m]&192)>>>6)+1,a=(v[m]&60)>>>2,f=(v[m]&1)<<2,m+=1,r=3;break;case 3:if(m>=y)return;f|=(v[m]&192)>>>6,l=(v[m]&3)<<11,m+=1,r=4;break;case 4:if(m>=y)return;l|=v[m]<<3,m+=1,r=5;break;case 5:if(m>=y)return;l|=(v[m]&224)>>>5,l-=o?7:9,m+=1,r=6;break;case 6:if(m>=y)return;c=((v[m]&3)+1)*1024,h=c*1e3/n[a],b=u<<11|a<<7|f<<3;if(b!==d||e-s>=1e3)p=new t(t.METADATA_TAG),p.pts=e,p.dts=e,p.writeMetaDataDouble("audiocodecid",10),p.writeMetaDataBoolean("stereo",2===f),p.writeMetaDataDouble("audiosamplerate",n[a]),p.writeMetaDataDouble("audiosamplesize",16),this.tags.push(p),d=b,p=new t(t.AUDIO_TAG,!0),p.pts=e,p.dts=p.pts,p.view.setUint16(p.position,b),p.position+=2,p.length=Math.max(p.length,p.position),this.tags.push(p),s=e;m+=1,r=7;break;case 7:if(!o){if(2>y-m)return;m+=2}p=new t(t.AUDIO_TAG),p.pts=e,p.dts=e,r=8;break;case 8:while(l){if(m>=y)return;w=y-m<l?y-m:l,p.writeBytes(v,m,w),m+=w,l-=w}this.tags.push(p),r=0,e+=h}}}}(this),function(e,t,n){"use strict";var r=function(e,t,n){var r,i="";for(r=t;r<n;r++)i+="%"+("00"+e[r].toString(16)).slice(-2);return i},i=function(t,n,i){return e.decodeURIComponent(r(t,n,i))},s=function(t,n,i){return e.unescape(r(t,n,i))},o={TXXX:function(e){var t;if(e.data[0]!==3)return;for(t=1;t<e.data.length;t++)if(e.data[t]===0){e.description=i(e.data,1,t),e.value=i(e.data,t+1,e.data.length-1);break}},WXXX:function(e){var t;if(e.data[0]!==3)return;for(t=1;t<e.data.length;t++)if(e.data[t]===0){e.description=i(e.data,1,t),e.url=i(e.data,t+1,e.data.length);break}},PRIV:function(e){var t;for(t=0;t<e.data.length;t++)if(e.data[t]===0){e.owner=s(e.data,0,t);break}e.privateData=e.data.subarray(t+1)}},u;u=function(e){var n={debug:!!e&&!!e.debug,descriptor:e&&e.descriptor},r=0,i=[],s=0,a;u.prototype.init.call(this),this.dispatchType=t.Hls.SegmentParser.STREAM_TYPES.metadata.toString(16);if(n.descriptor)for(a=0;a<n.descriptor.length;a++)this.dispatchType+=("00"+n.descriptor[a].toString(16)).slice(-2);this.push=function(e){var u,a,f,l,c;if(i.length===0&&(e.data.length<10||e.data[0]!=="I".charCodeAt(0)||e.data[1]!=="D".charCodeAt(0)||e.data[2]!=="3".charCodeAt(0))){n.debug&&t.log("Skipping unrecognized metadata packet");return}i.push(e),s+=e.data.byteLength,i.length===1&&(r=e.data[6]<<21|e.data[7]<<14|e.data[8]<<7|e.data[9],r+=10);if(s<r)return;u={data:new Uint8Array(r),frames:[],pts:i[0].pts,dts:i[0].dts};for(c=0;c<r;)u.data.set(i[0].data,c),c+=i[0].data.byteLength,s-=i[0].data.byteLength,i.shift();a=10,u.data[5]&64&&(a+=4,a+=u.data[10]<<24|u.data[11]<<16|u.data[12]<<8|u.data[13],r-=u.data[16]<<24|u.data[17]<<16|u.data[18]<<8|u.data[19]);do{f=u.data[a+4]<<24|u.data[a+5]<<16|u.data[a+6]<<8|u.data[a+7];if(f<1)return t.log("Malformed ID3 frame encountered. Skipping metadata parsing.");l={id:String.fromCharCode(u.data[a],u.data[a+1],u.data[a+2],u.data[a+3]),data:u.data.subarray(a+10,a+f+10)},o[l.id]&&o[l.id](l),u.frames.push(l),a+=10,a+=f}while(a<r);this.trigger("data",u)}},u.prototype=new t.Hls.Stream,t.Hls.MetadataStream=u}(window,window.videojs),function(e){var t=e.videojs,n=t.Hls.FlvTag,r=t.Hls.H264Stream,i=t.Hls.AacStream,s=t.Hls.MetadataStream,o,u;t.Hls.SegmentParser=function(){var e=this,a,f=new Uint8Array(o),l=0,c=new r,h=new i;e.stream={programMapTable:{}},e.metadataStream=new s,e.getFlvHeader=function(e,t,r){var i=new Uint8Array(9),s=new DataView(i.buffer),o,u,a;return e=e||0,t=t===undefined?!0:t,r=r===undefined?!0:r,s.setUint8(0,70),s.setUint8(1,76),s.setUint8(2,86),s.setUint8(3,1),s.setUint8(4,(t?4:0)|(r?1:0)),s.setUint32(5,i.byteLength),e<=0?(u=new Uint8Array(i.byteLength+4),u.set(i),u.set([0,0,0,0],i.byteLength),u):(o=new n(n.METADATA_TAG),o.pts=o.dts=0,o.writeMetaDataDouble("duration",e),a=o.finalize().length,u=new Uint8Array(i.byteLength+a),u.set(i),u.set(s.byteLength,a),u)},e.flushTags=function(){c.finishFrame()},e.tagsAvailable=function(){return c.tags.length+h.tags.length},e.getNextTag=function(){var e;return c.tags.length?h.tags.length?h.tags[0].dts<c.tags[0].dts?e=h.tags.shift():e=c.tags.shift():e=c.tags.shift():e=h.tags.shift(),e.finalize()},e.parseSegmentBinaryData=function(e){var n=0,r;if(l>0){if(e.byteLength+l<o){t.log("data.length + streamBuffer.length < MP2T_PACKET_LENGTH ??"
),f.readBytes(e,e.length,f.length);return}r=e.subarray(0,o-l),f.set(r,l),a(f),f=new Uint8Array(o),l=0}for(;;){while(n<e.byteLength&&e[n]!==71)n++;if(e.byteLength-n<o){e.byteLength-n>0&&(f.set(e.subarray(n),l),l+=e.byteLength-n);return}a(e.subarray(n,n+o))?n+=o:(t.log("error parsing m2ts packet, attempting to re-align"),n++)}},a=function(n){var r=0,i=r+o,s=!!(n[r+1]&64),a=(n[r+1]&31)<<8|n[r+2],f=(n[r+3]&48)>>>4,l,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A;r+=4,f>1&&(r+=n[r]+1);if(0===a){s&&(r+=1+n[r]),l=n[r],l!==0&&t.log("the table_id of the PAT should be 0x00 but was"+l.toString(16)),p=!!(n[r+5]&1);if(p){d=(n[r+1]&15)<<8|n[r+2],r+=8,g=r+(d-5-4);for(;r<g;r+=4){v=n[r]<<8|n[r+1],m=(n[r+2]&31)<<8|n[r+3];if(v===0)e.stream.networkPid=m;else if(e.stream.pmtPid===undefined)e.stream.pmtPid=m;else if(e.stream.pmtPid!==m)throw new Error("TS has more that 1 program")}}}else if(a===e.stream.programMapTable[u.h264]||a===e.stream.programMapTable[u.adts]||a===e.stream.programMapTable[u.metadata]){if(s){if(0!==n[r+0]||0!==n[r+1]||1!==n[r+2])throw new Error("PES did not begin with start code");y=n[r+4]<<8|n[r+5],b=(n[r+6]&4)!==0,w=n[r+7],E=n[r+8],r+=9,w&192&&(S=(n[r+0]&14)<<28|(n[r+1]&255)<<21|(n[r+2]&254)<<13|(n[r+3]&255)<<6|(n[r+4]&254)>>>2,S/=45,x=S,w&64&&(x=(n[r+5]&14)<<28|(n[r+6]&255)<<21|(n[r+7]&254)<<13|(n[r+8]&255)<<6|(n[r+9]&254)>>>2,x/=45)),r+=E,a===e.stream.programMapTable[u.h264]?c.setNextTimeStamp(S,x,b):a===e.stream.programMapTable[u.adts]&&h.setNextTimeStamp(S,y,b)}a===e.stream.programMapTable[u.adts]?h.writeBytes(n,r,i-r):a===e.stream.programMapTable[u.h264]?c.writeBytes(n,r,i-r):a===e.stream.programMapTable[u.metadata]&&e.metadataStream.push({pts:S,dts:x,data:n.subarray(r)})}else if(e.stream.pmtPid===a){s&&(r+=1+n[r]),n[r]!==2&&t.log("The table_id of a PMT should be 0x02 but was "+n[r].toString(16)),T=!!(n[r+5]&1);if(T){e.stream.programMapTable={},C=(n[r+1]&15)<<8|n[r+2],N=(n[r+10]&15)<<8|n[r+11],C-=N,C-=13,e.stream.programMapTable.pcrPid=(n[r+8]&31)<<8|n[r+9],r+=12+N;while(0<C){k=n[r+0],L=(n[r+1]&31)<<8|n[r+2];if(k===u.h264&&e.stream.programMapTable[k]&&e.stream.programMapTable[k]!==L)throw new Error("Program has more than 1 video stream");if(k===u.adts&&e.stream.programMapTable[k]&&e.stream.programMapTable[k]!==L)throw new Error("Program has more than 1 audio Stream");e.stream.programMapTable[k]=L,A=(n[r+3]&15)<<8|n[r+4],k===u.metadata&&(e.metadataStream.descriptor=new Uint8Array(n.subarray(r+5,r+5+A))),r+=5+A,C-=5+A}}}else e.stream.networkPid!==a&&17!==a&&8191!==a&&(e.stream.programMapTable.pcrPid||t.log("Unknown PID parsing TS packet: "+a));return!0},e.getTags=function(){return c.tags},e.stats={h264Tags:function(){return c.tags.length},minVideoPts:function(){return c.tags[0].pts},maxVideoPts:function(){return c.tags[c.tags.length-1].pts},aacTags:function(){return h.tags.length},minAudioPts:function(){return h.tags[0].pts},maxAudioPts:function(){return h.tags[h.tags.length-1].pts}}},t.Hls.SegmentParser.MP2T_PACKET_LENGTH=o=188,t.Hls.SegmentParser.STREAM_TYPES=u={h264:27,adts:15,metadata:21}}(window),function(e,t,n,r,i){var s=function(){},o=function(){var e="[^=]*",t='"[^"]*"|[^,]*',n="(?:"+e+")=(?:"+t+")";return new RegExp("(?:^|,)("+n+")")}(),u=function(e){var t=e.split(o),n=t.length,r={},i;while(n--){if(t[n]==="")continue;i=/([^=]*)=(.*)/.exec(t[n]).slice(1),i[0]=i[0].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^\s+|\s+$/g,""),i[1]=i[1].replace(/^['"](.*)['"]$/g,"$1"),r[i[0]]=i[1]}return r},a=e.Hls.Stream,f,l,c;f=function(){var e="";f.prototype.init.call(this),this.push=function(t){var n;e+=t,n=e.indexOf("\n");for(;n>-1;n=e.indexOf("\n"))this.trigger("data",e.substring(0,n)),e=e.substring(n+1)}},f.prototype=new a,l=function(){l.prototype.init.call(this)},l.prototype=new a,l.prototype.push=function(e){var n,r;e=e.replace(/^\s+|\s+$/g,"");if(e.length===0)return;if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}if(e.indexOf("#EXT")!==0){this.trigger("data",{type:"comment",text:e.slice(1)});return}e=e.replace("\r",""),n=/^#EXTM3U/.exec(e);if(n){this.trigger("data",{type:"tag",tagType:"m3u"});return}n=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(e);if(n){r={type:"tag",tagType:"inf"},n[1]&&(r.duration=parseFloat(n[1])),n[2]&&(r.title=n[2]),this.trigger("data",r);return}n=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"targetduration"},n[1]&&(r.duration=t(n[1],10)),this.trigger("data",r);return}n=/^#ZEN-TOTAL-DURATION:?([0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"totalduration"},n[1]&&(r.duration=t(n[1],10)),this.trigger("data",r);return}n=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"version"},n[1]&&(r.version=t(n[1],10)),this.trigger("data",r);return}n=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"media-sequence"},n[1]&&(r.number=t(n[1],10)),this.trigger("data",r);return}n=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"discontinuity-sequence"},n[1]&&(r.number=t(n[1],10)),this.trigger("data",r);return}n=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(e);if(n){r={type:"tag",tagType:"playlist-type"},n[1]&&(r.playlistType=n[1]),this.trigger("data",r);return}n=/^#EXT-X-BYTERANGE:?([0-9.]*)?@?([0-9.]*)?/.exec(e);if(n){r={type:"tag",tagType:"byterange"},n[1]&&(r.length=t(n[1],10)),n[2]&&(r.offset=t(n[2],10)),this.trigger("data",r);return}n=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(e);if(n){r={type:"tag",tagType:"allow-cache"},n[1]&&(r.allowed=!/NO/.test(n[1])),this.trigger("data",r);return}n=/^#EXT-X-STREAM-INF:?(.*)$/.exec(e);if(n){r={type:"tag",tagType:"stream-inf"},n[1]&&(r.attributes=u(n[1]),r.attributes.RESOLUTION&&function(){var e=r.attributes.RESOLUTION.split("x"),n={};e[0]&&(n.width=t(e[0],10)),e[1]&&(n.height=t(e[1],10)),r.attributes.RESOLUTION=n}(),r.attributes.BANDWIDTH&&(r.attributes.BANDWIDTH=t(r.attributes.BANDWIDTH,10)),r.attributes["PROGRAM-ID"]&&(r.attributes["PROGRAM-ID"]=t(r.attributes["PROGRAM-ID"],10))),this.trigger("data",r);return}n=/^#EXT-X-ENDLIST/.exec(e);if(n){this.trigger
("data",{type:"tag",tagType:"endlist"});return}n=/^#EXT-X-DISCONTINUITY/.exec(e);if(n){this.trigger("data",{type:"tag",tagType:"discontinuity"});return}n=/^#EXT-X-KEY:?(.*)$/.exec(e);if(n){r={type:"tag",tagType:"key"},n[1]&&(r.attributes=u(n[1]),r.attributes.IV&&(r.attributes.IV.substring(0,2)==="0x"&&(r.attributes.IV=r.attributes.IV.substring(2)),r.attributes.IV=r.attributes.IV.match(/.{8}/g),r.attributes.IV[0]=t(r.attributes.IV[0],16),r.attributes.IV[1]=t(r.attributes.IV[1],16),r.attributes.IV[2]=t(r.attributes.IV[2],16),r.attributes.IV[3]=t(r.attributes.IV[3],16),r.attributes.IV=new Uint32Array(r.attributes.IV))),this.trigger("data",r);return}this.trigger("data",{type:"tag",data:e.slice(4,e.length)})},c=function(){var e=this,t=[],o={},u;c.prototype.init.call(this),this.lineStream=new f,this.parseStream=new l,this.lineStream.pipe(this.parseStream),this.manifest={allowCache:!0,discontinuityStarts:[]},this.parseStream.on("data",function(a){(({tag:function(){((({"allow-cache":function(){this.manifest.allowCache=a.allowed,"allowed"in a||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var e={};"length"in a&&(o.byterange=e,e.length=a.length,"offset"in a||(this.trigger("info",{message:"defaulting offset to zero"}),a.offset=0)),"offset"in a&&(o.byterange=e,e.offset=a.offset)},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),a.duration>=0&&(o.duration=a.duration),this.manifest.segments=t},key:function(){if(!a.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(a.attributes.METHOD==="NONE"){u=null;return}if(!a.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}a.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),u={method:a.attributes.METHOD||"AES-128",uri:a.attributes.URI},a.attributes.IV!==i&&(u.iv=a.attributes.IV)},"media-sequence":function(){if(!n(a.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+a.number});return}this.manifest.mediaSequence=a.number},"discontinuity-sequence":function(){if(!n(a.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+a.number});return}this.manifest.discontinuitySequence=a.number},"playlist-type":function(){if(!/VOD|EVENT/.test(a.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+a.playlist});return}this.manifest.playlistType=a.playlistType},"stream-inf":function(){this.manifest.playlists=t;if(!a.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}o.attributes||(o.attributes={}),o.attributes=r(o.attributes,a.attributes)},discontinuity:function(){o.discontinuity=!0,this.manifest.discontinuityStarts.push(t.length)},targetduration:function(){if(!n(a.duration)||a.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+a.duration});return}this.manifest.targetDuration=a.duration},totalduration:function(){if(!n(a.duration)||a.duration<0){this.trigger("warn",{message:"ignoring invalid total duration: "+a.duration});return}this.manifest.totalDuration=a.duration}}))[a.tagType]||s).call(e)},uri:function(){o.uri=a.uri,t.push(o),this.manifest.targetDuration&&!("duration"in o)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),o.duration=this.manifest.targetDuration),u&&(o.key=u),o={}},comment:function(){}}))[a.type].call(e)})},c.prototype=new a,c.prototype.push=function(e){this.lineStream.push(e)},c.prototype.end=function(){this.lineStream.push("\n")},window.videojs.m3u8={LineStream:f,ParseStream:l,Parser:c}}(window.videojs,window.parseInt,window.isFinite,window.videojs.util.mergeOptions),function(e,t){"use strict";var n=10,r,i,s,o,u,a,f,l;u=function(e,t){return e=isFinite(e)?e:Infinity,t=isFinite(t)?t:Infinity,Math.min(e,t)},a=function(e,t){return e=isFinite(e)?e:-Infinity,t=isFinite(t)?t:-Infinity,Math.max(e,t)},i=function(e,t){return e-t},r=function(e,t,n,r){var s=[],o=(e.discontinuityStarts||[]).concat(n),u=0,a;if(t>=n)return 0;o.sort(i);for(a=0;a<o.length;a++)if(o[a]>t){s.push({start:t,end:o[a]}),a++;break}for(;a<o.length;a++){if(o[a]>=n){s.push({start:o[a-1],end:n});break}s.push({start:s[s.length-1].end,end:o[a]})}for(a=0;a<s.length;a++)u+=f(e,s[a],a===s.length-1&&r);return u},f=function(e,t,r){var i=0,s=e.targetDuration||n,o,f,l;for(f=t.start;f<t.end;f++){o=e.segments[f];if(o.minVideoPts!==undefined||o.minAudioPts!==undefined)break;i+=o.duration||s}if(r){o=e.segments[t.end];if(o&&(o.minVideoPts!==undefined||o.minAudioPts!==undefined))return i+=.001*(u(o.minVideoPts,o.minAudioPts)-u(e.segments[f].minVideoPts,e.segments[f].minAudioPts)),i}for(l=t.end-1;l>=f;l--){o=e.segments[l];if(o.maxVideoPts!==undefined||o.maxAudioPts!==undefined)break;i+=o.duration||s}return l>=f&&(i+=.001*(a(e.segments[l].maxVideoPts,e.segments[l].maxAudioPts)-u(e.segments[f].minVideoPts,e.segments[f].minAudioPts))),i},o=function(e,t,i,s){var o=0,u,f;return t===undefined&&(t=e.mediaSequence||0),i===undefined&&(i=t+(e.segments||[]).length),u=e.targetDuration||n,f=a(e.mediaSequence-t,0),o+=f*u,o+=r(e,t+f-e.mediaSequence,i-e.mediaSequence,s),o},s=function(t,n,r,i){if(!t)return 0;i===undefined&&(i=!0);if(n===undefined&&r===undefined){if(t.totalDuration)return t.totalDuration;if(!t.endList)return e.Infinity}return o(t,n,r,i)},l=function(e){var r,i,a,f,l,c,h;if(!e.segments)return t.createTimeRange();if(e.endList)return t.createTimeRange(0,s(e));r=0,i=o(e,e.mediaSequence,e.mediaSequence+e.segments.length),f=e.targetDuration||n;if(!e.endList){a=f*3;for(h=e.segments.length-1;h>=0&&a>0;h--)l=e.segments[h],c=u(s(e,e.mediaSequence+h,e.mediaSequence+h+1),a)
,a-=c,i-=c}return t.createTimeRange(r,i)},t.Hls.Playlist={duration:s,seekable:l}}(window,window.videojs),function(e,t){"use strict";var n=t.Hls.resolveUrl,r=t.Hls.xhr,i=t.Hls.Playlist,s=t.util.mergeOptions,o=function(e,t){var n=!1,r=s(e,{}),i,o;i=e.playlists.length;while(i--){o=r.playlists[i];if(o.uri===t.uri){if(o.segments&&t.segments&&o.segments.length===t.segments.length&&o.mediaSequence===t.mediaSequence)continue;r.playlists[i]=s(o,t),r.playlists[t.uri]=r.playlists[i],o.segments&&(r.playlists[i].segments=u(o.segments,t.segments,t.mediaSequence-o.mediaSequence)),n=!0}}return n?r:null},u=function(e,t,n){var r=t.slice(),i,o;n=n||0,i=Math.min(e.length,t.length+n);for(o=n;o<i;o++)r[o-n]=s(e[o],r[o-n]);return r},a=function(i,s){var u=this,f,l,c,h;a.prototype.init.call(this);if(!i)throw new Error("A non-empty playlist URL is required");h=function(n,r,i){var s,a,f;u.setBandwidth(c||r),c=null;if(n)return u.error={status:r.status,message:"HLS playlist request error at URL: "+i,responseText:r.responseText,code:r.status>=500?4:2},u.trigger("error");u.state="HAVE_METADATA",s=new t.m3u8.Parser,s.push(r.responseText),s.end(),s.manifest.uri=i,f=o(u.master,s.manifest),a=(s.manifest.targetDuration||10)*1e3,f?(u.master=f,u.updateMediaPlaylist_(s.manifest)):a/=2,u.media().endList||(e.clearTimeout(l),l=e.setTimeout(function(){u.trigger("mediaupdatetimeout")},a)),u.trigger("loadedplaylist")},u.state="HAVE_NOTHING",u.expiredPostDiscontinuity_=0,u.expiredPreDiscontinuity_=0,f=this.dispose,u.dispose=function(){c&&(c.onreadystatechange=null,c.abort(),c=null),e.clearTimeout(l),f.call(this)},u.media=function(e){var t=!1;if(!e)return u.media_;if(u.state==="HAVE_NOTHING"||u.state==="HAVE_MASTER")throw new Error("Cannot switch media playlist from "+u.state);if(typeof e=="string"){if(!u.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=u.master.playlists[e]}t=e.uri!==u.media_.uri;if(u.master.playlists[e.uri].endList){c&&(c.onreadystatechange=null,c.abort(),c=null),u.state="HAVE_METADATA",u.media_=e,t&&u.trigger("mediachange");return}if(!t)return;u.state="SWITCHING_MEDIA";if(c){if(n(u.master.uri,e.uri)===c.url)return;c.onreadystatechange=null,c.abort(),c=null}c=r({url:n(u.master.uri,e.uri),withCredentials:s},function(t){h(t,this,e.uri),u.trigger("mediachange")})},u.setBandwidth=function(e){u.bandwidth=e.bandwidth},u.on("mediaupdatetimeout",function(){if(u.state!=="HAVE_METADATA")return;u.state="HAVE_CURRENT_METADATA",c=r({url:n(u.master.uri,u.media().uri),withCredentials:s},function(e){h(e,this,u.media().uri)})}),r({url:i,withCredentials:s},function(o){var a,f;if(o)return u.error={status:this.status,message:"HLS playlist request error at URL: "+i,responseText:this.responseText,code:2},u.trigger("error");console.log("xhr : "+i),a=new t.m3u8.Parser,a.push(this.responseText),a.end(),u.state="HAVE_MASTER",console.log("hls : "+u.state),a.manifest.uri=i;if(a.manifest.playlists){u.master=a.manifest,f=u.master.playlists.length;while(f--)u.master.playlists[u.master.playlists[f].uri]=u.master.playlists[f];var l=n(i,a.manifest.playlists[0].uri);return c=r({url:l,withCredentials:s},function(e){console.log("xrh : "+l),h(e,this,a.manifest.playlists[0].uri),e||(console.log("loader.trigger : [loadedmetadata] "),u.trigger("loadedmetadata"))}),u.trigger("loadedplaylist")}return u.master={uri:e.location.href,playlists:[{uri:i}]},u.master.playlists[i]=u.master.playlists[0],h(null,this,i),console.log("loader.trigger : [loadedmetadata] "),u.trigger("loadedmetadata")})};a.prototype=new t.Hls.Stream,a.prototype.updateMediaPlaylist_=function(e){var t,n,r;if(this.media_){n=e.mediaSequence-this.media_.mediaSequence,t=this.media_.mediaSequence;if(this.media_.discontinuitySequence!==e.discontinuitySequence){r=n;while(r--)if(this.media_.segments[r].discontinuity){t=r+this.media_.mediaSequence,this.expiredPreDiscontinuity_+=this.expiredPostDiscontinuity_,this.expiredPostDiscontinuity_=0;break}}this.expiredPreDiscontinuity_+=i.duration(this.media_,this.media_.mediaSequence,t),this.expiredPostDiscontinuity_+=i.duration(this.media_,t,this.media_.mediaSequence+n)}this.media_=this.master.playlists[e.uri]},a.prototype.getMediaIndexForTime_=function(e){var t;if(!this.media_)return 0;e-=this.expiredPreDiscontinuity_+this.expiredPostDiscontinuity_;if(e<0)return 0;for(t=0;t<this.media_.segments.length;t++){e-=i.duration(this.media_,this.media_.mediaSequence+t,this.media_.mediaSequence+t+1,!1);if(e<=0)return t}return this.media_.segments.length-1},t.Hls.PlaylistLoader=a}(window,window.videojs),function(e,t,n){"use strict";var r,i,s,o,u;u=function(e){return e<<24|(e&65280)<<8|(e&16711680)>>8|e>>>24},r=function(e){this._precompute();var t,n,r,i,s,o=this._tables[0][4],u=this._tables[1],a=e.length,f=1;if(a!==4&&a!==6&&a!==8)throw new Error("Invalid aes key size");i=e.slice(0),s=[],this._key=[i,s];for(t=a;t<4*a+28;t++){r=i[t-1];if(t%a===0||a===8&&t%a===4)r=o[r>>>24]<<24^o[r>>16&255]<<16^o[r>>8&255]<<8^o[r&255],t%a===0&&(r=r<<8^r>>>24^f<<24,f=f<<1^(f>>7)*283);i[t]=i[t-a]^r}for(n=0;t;n++,t--)r=i[n&3?t:t-4],t<=4||n<4?s[n]=r:s[n]=u[0][o[r>>>24]]^u[1][o[r>>16&255]]^u[2][o[r>>8&255]]^u[3][o[r&255]]},r.prototype={_tables:[[[],[],[],[],[]],[[],[],[],[],[]]],_precompute:function(){var e=this._tables[0],t=this._tables[1],n=e[4],r=t[4],i,s,o,u=[],a=[],f,l,c,h,p,d;for(i=0;i<256;i++)a[(u[i]=i<<1^(i>>7)*283)^i]=i;for(s=o=0;!n[s];s^=f||1,o=a[o]||1){h=o^o<<1^o<<2^o<<3^o<<4,h=h>>8^h&255^99,n[s]=h,r[h]=s,c=u[l=u[f=u[s]]],d=c*16843009^l*65537^f*257^s*16843008,p=u[h]*257^h*16843008;for(i=0;i<4;i++)e[i][s]=p=p<<24^p>>>8,t[i][h]=d=d<<24^d>>>8}for(i=0;i<5;i++)e[i]=e[i].slice(0),t[i]=t[i].slice(0)},decrypt:function(e,t,n,r,i,s){var o=this._key[1],u=e^o[0],a=r^o[1],f=n^o[2],l=t^o[3],c,h,p,d=o.length/4-2,v,m=4,g=this._tables[1],y=g[0],b=g[1],w=g[2],E=g[3],S=g[4];for(v=0;v<d;v++)c=y[u>>>24]^b[a>>16&255]^w[f>>8&255]^E[l&255]^o[m],h=y[a>>>24]^b[f>>16&255]^w[l>>8&255]^E[u&255]^o[m+1],p=y[f>>>24]^b[l>>16&255]^w[u>>8&255]^E[a&255]^o[m+2],l=y[l>>>24]^b[u>>16&255]^w[a>>8&255]^E[f&255
]^o[m+3],m+=4,u=c,a=h,f=p;for(v=0;v<4;v++)i[(3&-v)+s]=S[u>>>24]<<24^S[a>>16&255]<<16^S[f>>8&255]<<8^S[l&255]^o[m++],c=u,u=a,a=f,f=l,l=c}},o=function(e,t,n){var i=new Int32Array(e.buffer,e.byteOffset,e.byteLength>>2),s=new r(Array.prototype.slice.call(t)),o=new Uint8Array(e.byteLength),a=new Int32Array(o.buffer),f,l,c,h,p,d,v,m,g;f=n[0],l=n[1],c=n[2],h=n[3];for(g=0;g<i.length;g+=4)p=u(i[g]),d=u(i[g+1]),v=u(i[g+2]),m=u(i[g+3]),s.decrypt(p,d,v,m,a,g),a[g]=u(a[g]^f),a[g+1]=u(a[g+1]^l),a[g+2]=u(a[g+2]^c),a[g+3]=u(a[g+3]^h),f=p,l=d,c=v,h=m;return o},i=function(){this.jobs=[],this.delay=1,this.timeout_=null},i.prototype=new t.Hls.Stream,i.prototype.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(t.bind(this,this.processJob_),this.delay):this.timeout_=null},i.prototype.push=function(e){this.jobs.push(e),this.timeout_||(this.timeout_=setTimeout(t.bind(this,this.processJob_),this.delay))},s=function(e,t,r,o){var a=s.STEP,f=new Int32Array(e.buffer),l=new Uint8Array(e.byteLength),c=0;this.asyncStream_=new i,this.asyncStream_.push(this.decryptChunk_(f.subarray(c,c+a),t,r,l,c));for(c=a;c<f.length;c+=a)r=new Uint32Array([u(f[c-4]),u(f[c-3]),u(f[c-2]),u(f[c-1])]),this.asyncStream_.push(this.decryptChunk_(f.subarray(c,c+a),t,r,l));this.asyncStream_.push(function(){o(null,n(l))})},s.prototype=new t.Hls.Stream,s.prototype.decryptChunk_=function(e,t,n,r){return function(){var i=o(e,t,n);r.set(i,e.byteOffset)}},s.STEP=32e3,t.Hls.decrypt=o,t.Hls.Decrypter=s,t.Hls.AsyncStream=i}(window,window.videojs,window.pkcs7.unpad),function(e){var t={hexDump:function(e){var t=Array.prototype.slice.call(e),n=16,r=function(e,t){var n=e.toString(16);return"00".substring(0,2-n.length)+n+(t%2?" ":"")},i=function(e){return e>=32&&e<126?String.fromCharCode(e):"."},s="",o,u;for(var a=0;a<t.length/n;a++)o=t.slice(a*n,a*n+n).map(r).join(""),u=t.slice(a*n,a*n+n).map(i).join(""),s+=o+" "+u+"\n";return s},tagDump:function(e){return t.hexDump(e.bytes)}};e.videojs.Hls.utils=t}(this);
