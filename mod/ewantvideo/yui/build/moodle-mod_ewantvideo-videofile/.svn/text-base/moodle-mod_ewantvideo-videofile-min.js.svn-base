YUI.add("moodle-mod_ewantvideo-videofile",function(e,t){(function(e){var t=function(e){var t,n,r;for(n=1;n<arguments.length;n++){t=arguments[n];for(r in t)t.hasOwnProperty(r)&&(e[r]=t[r])}return e},n={autoDisable:!1},r=function(e){var r=this,i=!1,s=t({},n,e||{});r.disableProgress={disable:function(){i=!0,r.controlBar.progressControl.seekBar.off("mousedown"),r.controlBar.progressControl.seekBar.off("touchstart"),r.controlBar.progressControl.seekBar.off("click")},enable:function(){i=!1,r.controlBar.progressControl.seekBar.on("mousedown",r.controlBar.progressControl.seekBar.onMouseDown),r.controlBar.progressControl.seekBar.on("touchstart",r.controlBar.progressControl.seekBar.onMouseDown),r.controlBar.progressControl.seekBar.on("click",r.controlBar.progressControl.seekBar.onClick)},getState:function(){return i}},s.autoDisable&&r.disableProgress.disable()};e.plugin("disableProgress",r)})(window.videojs),M.mod_ewantvideo=M.mod_ewantvideo||{},M.mod_ewantvideo.videofile={initm3u8:function(e,t,n,r){videojs("videofile-"+e,{width:t,height:n,techOrder:["hlsJs","hls","flash","html5"]},function(){player=this,player.persistvolume({namespace:"videojs-volume"}),player.controls(!0),player.src({type:"application/x-mpegURL",src:r})})},initResize:function(e,t,n,r){function a(){var e=o.offsetWidth;i.width(e).height(e*u)}var i=videojs("videofile-"+e),s=document.getElementById(i.id()),o=s.parentElement,u=n/t;r&&(s.style.maxWidth=t+"px",s.style.maxHeight=n+"px"),a(),window.onresize=a},enableTrackView:function(t){var n=videojs("videofile-"+t);n.ready(function(){n.disableProgress({autoDisable:!0})}),n.videoId=t,n.on("loadedmetadata",function(){var r=n.duration();M.cfg.developerdebug&&console.log("id : "+t+", duration-time : "+r),e.use("io-base",function(e){e.io("init.php",{method:"GET",data:{sesskey:M.cfg.sesskey,id:t,duration:r}})})}),n.on("timeupdate",function(){var t=this.videoId,n=this.currentTime();M.cfg.developerdebug&&console.log("id : "+this.videoId+", time : "+n),n>1&&e.use("io-base",function(e){e.io("tview.php",{method:"GET",data:{sesskey:M.cfg.sesskey,id:t,viewtime:n}})})})},addTracks:function(e,t){var n=videojs("videofile-"+e),r=Array();for(idx in t){var i=t[idx],s={kind:i.kind,src:i.src,srclang:i.srclang,label:i.label};r.push(s)}n.ready(function(){for(idx in r){var e=r[idx];n.addRemoteTextTrack(e)}})}}},"@VERSION@");
